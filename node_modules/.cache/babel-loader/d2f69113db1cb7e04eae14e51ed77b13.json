{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\n\nconst useToken = user => {\n  _s();\n\n  const [token, setToken] = useState('');\n  useEffect(() => {\n    var _user$user;\n\n    const email = user === null || user === void 0 ? void 0 : (_user$user = user.user) === null || _user$user === void 0 ? void 0 : _user$user.email;\n    const currentUser = {\n      email: email\n    };\n\n    if (email) {\n      fetch(`https://secret-dusk-46242.herokuapp.com/user/${email}`, {\n        method: 'PUT',\n        headers: {\n          'content-type': 'application/json'\n        },\n        body: JSON.stringify(currentUser)\n      }).then(res => res.json()).then(data => {\n        console.log('data inside useToken', data);\n        const accessToken = data.token;\n        localStorage.setItem('accessToken', accessToken);\n        setToken(accessToken);\n      });\n    }\n  }, [user]);\n  return [token];\n};\n\n_s(useToken, \"vf+oyXHY90mQMbpq6nUOg8QmBuc=\");\n\nexport default useToken;","map":{"version":3,"names":["useEffect","useState","useToken","user","token","setToken","email","currentUser","fetch","method","headers","body","JSON","stringify","then","res","json","data","console","log","accessToken","localStorage","setItem"],"sources":["C:/projects/doctors-portal-client-module-77/src/hooks/useToken.js"],"sourcesContent":["import { useEffect, useState } from \"react\"\r\n\r\nconst useToken = user =>{\r\n    const [token, setToken] = useState('');\r\n    useEffect( () =>{\r\n        const email = user?.user?.email;\r\n        const currentUser = {email: email};\r\n        if(email){\r\n            fetch(`https://secret-dusk-46242.herokuapp.com/user/${email}`, {\r\n                method:'PUT',\r\n                headers: {\r\n                    'content-type': 'application/json'\r\n                },\r\n                body:JSON.stringify(currentUser)\r\n            })\r\n            .then(res=>res.json())\r\n            .then(data => {\r\n                console.log('data inside useToken', data);\r\n                const accessToken = data.token;\r\n                localStorage.setItem('accessToken', accessToken);\r\n                setToken(accessToken);\r\n            })\r\n        }\r\n\r\n    }, [user]);\r\n    return [token];\r\n}\r\n\r\nexport default useToken;"],"mappings":";;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;;AAEA,MAAMC,QAAQ,GAAGC,IAAI,IAAG;EAAA;;EACpB,MAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBJ,QAAQ,CAAC,EAAD,CAAlC;EACAD,SAAS,CAAE,MAAK;IAAA;;IACZ,MAAMM,KAAK,GAAGH,IAAH,aAAGA,IAAH,qCAAGA,IAAI,CAAEA,IAAT,+CAAG,WAAYG,KAA1B;IACA,MAAMC,WAAW,GAAG;MAACD,KAAK,EAAEA;IAAR,CAApB;;IACA,IAAGA,KAAH,EAAS;MACLE,KAAK,CAAE,gDAA+CF,KAAM,EAAvD,EAA0D;QAC3DG,MAAM,EAAC,KADoD;QAE3DC,OAAO,EAAE;UACL,gBAAgB;QADX,CAFkD;QAK3DC,IAAI,EAACC,IAAI,CAACC,SAAL,CAAeN,WAAf;MALsD,CAA1D,CAAL,CAOCO,IAPD,CAOMC,GAAG,IAAEA,GAAG,CAACC,IAAJ,EAPX,EAQCF,IARD,CAQMG,IAAI,IAAI;QACVC,OAAO,CAACC,GAAR,CAAY,sBAAZ,EAAoCF,IAApC;QACA,MAAMG,WAAW,GAAGH,IAAI,CAACb,KAAzB;QACAiB,YAAY,CAACC,OAAb,CAAqB,aAArB,EAAoCF,WAApC;QACAf,QAAQ,CAACe,WAAD,CAAR;MACH,CAbD;IAcH;EAEJ,CApBQ,EAoBN,CAACjB,IAAD,CApBM,CAAT;EAqBA,OAAO,CAACC,KAAD,CAAP;AACH,CAxBD;;GAAMF,Q;;AA0BN,eAAeA,QAAf"},"metadata":{},"sourceType":"module"}